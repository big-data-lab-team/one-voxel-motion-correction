{
    "command-line": ". /env/bin/activate; ovmc [ALGORITHM] [BOOTSTRAP] [DATASET] [DATASET_PERTURBATED] [OUTPUT_BASE_NAME]",
    "container-image": {
        "image": "bigdatalabteam/one-voxel-motion-correction:latest",
        "type": "docker"
    },
    "description": "Wrapper for ovmc experiment.",
    "inputs": [
        {
            "id": "dataset",
            "name": "The fMRI sequence to process",
            "type": "File",
            "value-key": "[DATASET]"
        },
        {
            "id": "dataset_perturbated",
            "name": "The fMRI sequence to process, perturbate with one-voxel.",
            "type": "File",
            "value-key": "[DATASET_PERTURBATED]"
        },
        {
            "id": "output_base_name",
            "name": "Output base name",
            "type": "String",
            "value-key": "[OUTPUT_BASE_NAME]"
        },
        {
            "id": "algorithm",
            "name": "Motion estimation algorithm",
            "type": "String",
            "value-key": "[ALGORITHM]",
            "value-choices": ["mcflirt", "mcflirt_fudge", "niak", "niak_no_chained_init", "spm", "afni"]
        },
        {
            "id": "bootstrap",
            "name": "Number of bootstrap iterations",
            "type": "Number",
            "integer": true,
            "command-line-flag": "--bootstrap",
            "optional": true,
            "value-key": "[BOOTSTRAP]"
        }
    ],
    "name": "ovmc",
    "output-files": [
        {
            "id": "par_file",
            "name": "Parameter file produced by motion correction (original dataset)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME].par"
        },
        {
            "id": "fd_file",
            "name": "Frame displacement file produced by motion correction (original dataset)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME].fd"
        },
        {
            "id": "par_file_perturbated",
            "name": "Parameter file produced by motion correction (perturbated dataset)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME]_perturbated.par"
        },
        {
            "id": "fd_file_perturbated",
            "name": "Frame displacement file produced by motion correction (perturbated dataset)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME]_perturbated.fd"
        },
        {
            "id": "par_file_diff",
            "name": "Parameter file produced by motion correction (diff between datasets)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME]_diff.par"
        },
        {
            "id": "fd_file_diff",
            "name": "Frame displacement file produced by motion correction (diff between datasets)",
            "optional": false,
            "path-template": "[OUTPUT_BASE_NAME]_diff.fd"
        }
    ],
    "tests": [
        {
            "name": "test-mcflirt",
            "invocation": {
                "algorithm": "mcflirt",
                "output_base_name": "output_mcflirt",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "a2137d0fac5e1b7703416714457d51dc"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "c18d1aacdc34c817e5a29cdcefea59ad"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "e9192dfab9bf20724959510af1fddf77"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "b1d397eb4cf99711f4e94635670eef2f"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "be35a8a3fdcb1587487234550e43ba8f"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "83ce6eb25c7a729aed03040d63cc60a0"
                }
                ]
            }
        },
        {
            "name": "test-mcflirt-fudge",
            "invocation": {
                "algorithm": "mcflirt_fudge",
                "output_base_name": "output_mcflirt_fudge",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "8ce81be9309c78d15bb2be92deaa712e"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "ad4c82251fdbc3c3f2f18dd42fbdc4e7"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "51ac4a25aa9804cbc6d8ad40440a9651"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "a05a57df1211c80a80ebbfa97139b7dd"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "2384a7baff1e360b5d25942f790d537f"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "c90a155172a45f0bb7e0138b1db505af"
                }
                ]
            }
        },
        {
            "name": "test-afni",
            "invocation": {
                "algorithm": "afni",
                "output_base_name": "output_afni",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "b83e017768954c6908f4ed4aa27a4f21"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "8135b3fdc892a76149d224fce7cf8985"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "8fbcf31ccb11fd8990a970f774929bc6"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "4354787bc131af6f3c857df2392eb82b"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "11618ce5eaed80c5b10ec8e7ac6c8a2c"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "770fbaab355967e29645a3acfa0f4490"
                }
                ]
            }
        },
        {
            "name": "test-niak",
            "invocation": {
                "algorithm": "niak",
                "output_base_name": "output_niak",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "9017539964b6b40e175b983ba3bbacdc"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "6e904dd78820a3c4262e499b73fe05a6"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "24523eb1ab3990301e31a4fce7f70840"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "c4b4d2f1a85463c529277ddcf060d3b4"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "6eafda46ac6b4c86851f761ccb5f6e47"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "40cb453a9b148f9ce2dcf205c3275311"
                }
                ]
            }
        },
        {
            "name": "test-niak-no-chained-init",
            "invocation": {
                "algorithm": "niak_no_chained_init",
                "output_base_name": "output_niak_no_chained_init",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "6d2c938147b0ca07a854d876d071c3c0"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "d6e17e726a229f4b77bf650d4848c46f"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "9064a2eec857e0aa8af07d2fde507aed"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "c5ea412553a59ce9243be8849e8c9d78"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "7abfef691632273c137eeef3524fb415"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "8ee1f3b25de952ddbe41df9233c1778c"
                }
                ]
            }
        },
        {
            "name": "test-spm",
            "invocation": {
                "algorithm": "spm",
                "output_base_name": "output_spm",
                "dataset": "/test/test.nii.gz",
                "dataset_perturbated": "/test/test_one_voxel.nii.gz"
            },
            "assertions": {
                "exit-code": 0,
                "output-files": [ {
                    "id": "par_file",
                    "md5-reference": "1a424bea6c77713ed2f997cad85f6792"
                },
                {
                    "id": "fd_file",
                    "md5-reference": "8357b3903039a886788494f802532387"
                },
                {
                    "id": "par_file_perturbated",
                    "md5-reference": "23d9b81920c4778be903564971daf981"
                },
                {
                    "id": "fd_file_perturbated",
                    "md5-reference": "2d3644dc6d190562ce7f57c71f383412"
                },
                {
                    "id": "par_file_diff",
                    "md5-reference": "09fa103dfcfa4afdca5769027fde5f95"
                },
                {
                    "id": "fd_file_diff",
                    "md5-reference": "cd98ed06fc777d1f7cf2f6ccbddd7873"
                }
                ]
            }
        }
    ],
    "schema-version": "0.5",
    "tags": {
        "purpose": "experiment",
        "modality": "fmri",
        "pipeline": "motion-estimation"
    },
    "tool-version": "0.1"
}
